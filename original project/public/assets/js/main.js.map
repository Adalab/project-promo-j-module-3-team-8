{"version":3,"sources":["00-component.js","01-variables.js","02-collapsible.js","03-form-preview.js","04-reset.js","05-submit.js","06-urlCard-localStorage.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\r\n\r\nconst fr = new FileReader();\r\nconst uploadBtn = document.querySelector('.js__profile-trigger');\r\nconst fileField = document.querySelector('.js__profile-upload-btn');\r\nconst miniImg = document.querySelector('.js__profile-image');\r\nconst maxImg = document.querySelector('.js__profile-preview');\r\n\r\n/**\r\n * Recoge el archivo añadido al campo de tipo \"file\"\r\n * y lo carga en nuestro objeto FileReader para que\r\n * lo convierta a algo con lo que podamos trabajar.\r\n * Añade un listener al FR para que ejecute una función\r\n * al tener los datos listos\r\n * @param {evento} e\r\n */\r\nfunction getImage(e) {\r\n  const myFile = e.currentTarget.files[0];\r\n  fr.addEventListener('load', writeImage);\r\n  fr.readAsDataURL(myFile);\r\n}\r\n\r\n/**\r\n * Una vez tenemos los datos listos en el FR podemos\r\n * trabajar con ellos ;)\r\n */\r\n\r\nfunction writeImage() {\r\n  /* En la propiedad `result` de nuestro FR se almacena\r\n   * el resultado. Ese resultado de procesar el fichero que hemos cargado\r\n   * podemos pasarlo como background a la imagen de perfil y a la vista previa\r\n   * de nuestro componente.\r\n   */\r\n  infoPerson.photo = fr.result;\r\n  localStorage.setItem('infoPerson', JSON.stringify(infoPerson));\r\n  miniImg.style.backgroundImage = `url(${fr.result})`;\r\n  maxImg.style.backgroundImage = `url(${fr.result})`;\r\n}\r\n\r\n/**\r\n * Genera un click automático en nuesto campo de tipo \"file\"\r\n * que está oculto\r\n */\r\nfunction fakeFileClick() {\r\n  fileField.click();\r\n}\r\n\r\n/**\r\n * Añadimos los listeners necesarios:\r\n * - al botón visible para generar el click automático\r\n * - al campo oculto para cuando cambie su value\r\n */\r\nuploadBtn.addEventListener('click', fakeFileClick);\r\nfileField.addEventListener('change', getImage);\r\n","'use strict';\r\n//OBJETO\r\nlet infoPerson = {\r\n  palette: 0, //antes colorSelected\r\n  name: '',\r\n  job: '',\r\n  photo: '',\r\n  email: '',\r\n  phone: '', //antes telephone\r\n  linkedin: '', //antes linkedIn\r\n  github: '', //antes gitHub\r\n};\r\n\r\n//VARIABLES\r\nconst resetButton = document.querySelector('.reset__button-js');\r\nconst submitButton = document.querySelector('.article__share__button');\r\nconst paletteA = document.querySelector('.color1-js');\r\nconst paletteB = document.querySelector('.color2-js');\r\nconst paletteC = document.querySelector('.color3-js');\r\nconst fullName = document.querySelector('.fullName-js');\r\nconst job = document.querySelector('.job-js');\r\nconst selectImagen = document.querySelector('.addImage-js');\r\nconst email = document.querySelector('.email-js');\r\nconst telephone = document.querySelector('.telephone-js');\r\nconst linkedIn = document.querySelector('.linkedIn-js');\r\nconst gitHub = document.querySelector('.gitHub-js');\r\nconst previewFullName = document.querySelector('.previewFullName-js');\r\nconst previewJob = document.querySelector('.previewJob-js');\r\nconst previewTelephone = document.querySelector('.previewTelephone-js');\r\nconst previewEmail = document.querySelector('.previewEmail-js');\r\nconst previewLinkedIn = document.querySelector('.previewLinkedIn-js');\r\nconst previewGitHub = document.querySelector('.previewGitHub-js');\r\nconst previewIcon1 = document.querySelector('.previewIconBorder1-js');\r\nconst previewIcon2 = document.querySelector('.previewIconBorder2-js');\r\nconst previewIcon3 = document.querySelector('.previewIconBorder3-js');\r\nconst previewIcon4 = document.querySelector('.previewIconBorder4-js');\r\nconst formOpenDesign = document.querySelector('.form__open__design');\r\nconst formCloseDesign = document.querySelector('.form__closed__design');\r\nconst divArrowDesign = document.querySelector('.form__arrow--design');\r\nconst formOpenFill = document.querySelector('.form__open__fill');\r\nconst formCloseFill = document.querySelector('.form__closed__fill');\r\nconst divArrowFill = document.querySelector('.form__arrow--fill');\r\nconst formOpenShare = document.querySelector('.form__open__share');\r\nconst formCloseShare = document.querySelector('.form__closed__share');\r\nconst divArrowShare = document.querySelector('.form__arrow--share');\r\nconst startButton = document.querySelector('.container__btn-js');\r\nconst previewCard = document.querySelector('.preview');\r\nconst palettes = document.querySelectorAll('.palette-js');\r\nconst steps = document.querySelectorAll('.steps-js');\r\nconst twitterContainer = document.querySelector('.article__share__create');\r\nconst twitterButton = document.querySelector('.article__twitter__button');\r\n\r\n//METE EL VALOR DE LOS INPUTS EN EL OBJETO\r\nfunction valueInput() {\r\n  infoPerson.name = fullName.value;\r\n  infoPerson.job = job.value;\r\n  infoPerson.email = email.value;\r\n  infoPerson.phone = Number(telephone.value);\r\n  infoPerson.linkedin = linkedIn.value;\r\n  infoPerson.github = gitHub.value;\r\n  localStorage.setItem('infoPerson', JSON.stringify(infoPerson));\r\n}\r\n\r\n//LISTENERS\r\nfullName.addEventListener('keyup', valueInput);\r\njob.addEventListener('keyup', valueInput);\r\nselectImagen.addEventListener('change', valueInput);\r\nemail.addEventListener('keyup', valueInput);\r\ntelephone.addEventListener('keyup', valueInput);\r\nlinkedIn.addEventListener('keyup', valueInput);\r\ngitHub.addEventListener('keyup', valueInput);\r\n","//CERRAR DESIGN SECTION\r\nfunction hideDesign() {\r\n  formOpenDesign.classList.toggle('hidden');\r\n  divArrowDesign.classList.toggle('closed');\r\n}\r\nformCloseDesign.addEventListener('click', hideDesign);\r\n\r\n//CERRAR FILL SECTION\r\nfunction hideFill() {\r\n  formOpenFill.classList.toggle('hidden');\r\n  divArrowFill.classList.toggle('closed');\r\n}\r\nformCloseFill.addEventListener('click', hideFill);\r\n\r\n//CERRAR SHARE SECTION\r\nfunction hideShare() {\r\n  formOpenShare.classList.toggle('hidden');\r\n  divArrowShare.classList.toggle('closed');\r\n}\r\nformCloseShare.addEventListener('click', hideShare);","// FUNCION PARA RELLENAR PREVIEW -- NAME\r\nfunction handleUpdateFullName() {\r\n  infoPerson.name = fullName.value;\r\n  previewFullName.innerHTML =\r\n    infoPerson.name === '' ? 'Nombre Apellido' : infoPerson.name;\r\n}\r\n\r\n// FUNCION PARA RELLENAR PREVIEW -- JOB\r\nfunction handleUpdateJob() {\r\n  infoPerson.job = job.value;\r\n  previewJob.innerHTML =\r\n    infoPerson.job === '' ? 'Front-end developer' : infoPerson.job;\r\n}\r\n\r\n// FUNCION PARA RELLENAR PREVIEW -- EMAIL\r\nfunction handleUpdateEmail() {\r\n  infoPerson.email = email.value;\r\n  const emailFilled = email.value;\r\n  return (previewEmail.href = 'mailto:' + emailFilled);\r\n}\r\n\r\n// FUNCION PARA RELLENAR PREVIEW -- TELEFONO\r\nfunction handleUpdateTelephone() {\r\n  infoPerson.phone = telephone.value;\r\n  const telephoneFilled = telephone.value;\r\n  return (previewTelephone.href = 'tel:' + telephoneFilled);\r\n}\r\n\r\n// FUNCION PARA RELLENAR PREVIEW -- LINKEDIN\r\nfunction handleUpdateLinkedIn() {\r\n  infoPerson.linkedin = linkedIn.value;\r\n  const linkedInFilled = linkedIn.value;\r\n  return (previewLinkedIn.href = `https://www.linkedin.com/in/${linkedInFilled}`);\r\n}\r\n\r\n// FUNCION PARA RELLENAR PREVIEW -- GITHUB\r\nfunction handleUpdateGitHub() {\r\n  infoPerson.github = gitHub.value;\r\n  const gitHubFilled = gitHub.value;\r\n  return (previewGitHub.href = `https://github.com/${gitHubFilled}`);\r\n}\r\n\r\n// LISTENERS\r\nfullName.addEventListener('keyup', handleUpdateFullName);\r\njob.addEventListener('keyup', handleUpdateJob);\r\nemail.addEventListener('keyup', handleUpdateEmail);\r\ntelephone.addEventListener('keyup', handleUpdateTelephone);\r\nlinkedIn.addEventListener('keyup', handleUpdateLinkedIn);\r\ngitHub.addEventListener('keyup', handleUpdateGitHub);\r\n\r\n\r\n//CAMBIAR LOS COLORES CON LAS PALETAS\r\nfunction changeColors(event) {\r\n  previewCard.classList.remove('palette1-js');\r\n  previewCard.classList.remove('palette2-js');\r\n  previewCard.classList.remove('palette3-js');\r\n  infoPerson.palette = Number(event.target.value);\r\n  previewCard.classList.add(`palette${infoPerson.palette}-js`);\r\n}\r\nfor (const palette of palettes) {\r\n  palette.addEventListener('change', changeColors);\r\n}\r\n","'use strict';\r\n\r\n//FUNCION PARA RESETEAR FORMULARIO\r\nfunction resetForm() {\r\n  infoPerson.palette = 0;\r\n  infoPerson.name = '';\r\n  infoPerson.job = '';\r\n  infoPerson.photo = '';\r\n  infoPerson.email = '';\r\n  infoPerson.phone = '';\r\n  infoPerson.linkedin = '';\r\n  infoPerson.github = '';\r\n  fullName.value = '';\r\n  job.value = '';\r\n  email.value = '';\r\n  telephone.value = '';\r\n  linkedIn.value = '';\r\n  gitHub.value = '';\r\n  previewFullName.innerHTML = 'Nombre Apellido';\r\n  previewJob.innerHTML = 'Front-End Developer';\r\n  localStorage.removeItem('infoPerson');\r\n  submitButton.setAttribute('disabled', 'disabled');\r\n  twitterContainer.classList.add('hidden');\r\n}\r\n\r\nfunction resetImgPreview() {\r\n  maxImg.style.backgroundImage = ``;\r\n  miniImg.style.backgroundImage = ``;\r\n}\r\n\r\nfunction resetComplete(event) {\r\n  resetForm();\r\n  resetImgPreview();\r\n}\r\n\r\nresetButton.addEventListener('click', resetComplete);\r\n","'use strict';\r\n//LISTENERS\r\nfullName.addEventListener('keyup', () => {\r\n  valueInput();\r\n  validateForm();\r\n});\r\njob.addEventListener('keyup', () => {\r\n  valueInput();\r\n  validateForm();\r\n});\r\nselectImagen.addEventListener('change', () => {\r\n  valueInput();\r\n  validateForm();\r\n});\r\nemail.addEventListener('keyup', () => {\r\n  valueInput();\r\n  validateForm();\r\n});\r\ntelephone.addEventListener('keyup', () => {\r\n  valueInput();\r\n  validateForm();\r\n});\r\nlinkedIn.addEventListener('keyup', () => {\r\n  valueInput();\r\n  validateForm();\r\n});\r\ngitHub.addEventListener('keyup', () => {\r\n  valueInput();\r\n  validateForm();\r\n});\r\nresetButton.addEventListener('click', resetForm);\r\n\r\n// FUNCIÓN PARA VALIDAR EL FORMULARIO:\r\n\r\nfunction validateForm() {\r\n  if (\r\n    infoPerson.name.length < 1 ||\r\n    infoPerson.job.length < 1 ||\r\n    infoPerson.photo.length < 1 ||\r\n    infoPerson.email.length < 1 ||\r\n    infoPerson.phone.length < 1 ||\r\n    infoPerson.linkedin.length < 1 ||\r\n    infoPerson.github.length < 1\r\n  ) {\r\n    submitButton.setAttribute('disabled', 'disabled');\r\n  } else {\r\n    submitButton.removeAttribute('disabled');\r\n    submitButton.classList.remove('cursor__btn__submit');\r\n  }\r\n}\r\n\r\nsubmitButton.addEventListener('click', sendData);\r\nwindow.addEventListener('load', validateForm);\r\n","'use strict';\r\n\r\n// GENERAR URL DE LA TARJETA\r\nconst responseURL = document.querySelector('.response');\r\n\r\nfunction sendData(ev) {\r\n  ev.preventDefault();\r\n  sendRequest(infoPerson);\r\n}\r\n\r\nfunction sendRequest(json) {\r\n  fetch('https://us-central1-awesome-cards-cf6f0.cloudfunctions.net/card/', {\r\n    method: 'POST',\r\n    body: JSON.stringify(json),\r\n    headers: {\r\n      'content-type': 'application/json',\r\n    },\r\n  })\r\n    .then(function (resp) {\r\n      return resp.json();\r\n    })\r\n    .then(function (result) {\r\n      showURL(result);\r\n      twitterContainer.classList.remove('hidden');\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n}\r\n\r\nfunction showURL(result) {\r\n  const child = document.querySelector('.child');\r\n  if (result.success) {\r\n    responseURL.innerHTML =\r\n      '<a href=' +\r\n      result.cardURL +\r\n      \" target='_blank' rel='noopener noreferrer'>\" +\r\n      result.cardURL +\r\n      '</a>';\r\n\r\n    const tweet = 'Hola Adalaber, aquí tienes tu tarjeta de presentación! 🌸';\r\n    twitterButton.setAttribute(\r\n      'href',\r\n      `https://twitter.com/intent/tweet?url=${tweet} ${result.cardURL}`\r\n    );\r\n    twitterButton.setAttribute('target', '_blank');\r\n    twitterButton.appendChild(child);\r\n  } else {\r\n    responseURL.innerHTML = 'ERROR:' + result.error;\r\n  }\r\n}\r\n\r\n//LOCAL STORAGE\r\nconst recoverInfo = () => {\r\n  const local = localStorage.getItem('infoPerson');\r\n  const dataLocal = JSON.parse(local);\r\n  if (dataLocal !== null) {\r\n    infoPerson.fullName = dataLocal.name;\r\n    fullName.value = dataLocal.name;\r\n    handleUpdateFullName();\r\n\r\n    infoPerson.job = dataLocal.job;\r\n    job.value = dataLocal.job;\r\n    handleUpdateJob();\r\n\r\n    infoPerson.email = dataLocal.email;\r\n    email.value = dataLocal.email;\r\n    handleUpdateEmail();\r\n\r\n    phone.value = dataLocal.phone;\r\n    infoPerson.phone = dataLocal.phone;\r\n    handleUpdateTelephone();\r\n\r\n    infoPerson.photo = dataLocal.photo;\r\n    maxImg.style.backgroundImage = `url(${dataLocal.photo})`;\r\n    miniImg.style.backgroundImage = `url(${dataLocal.photo})`;\r\n\r\n\r\n    infoPerson.linkedin = dataLocal.linkedin;\r\n    linkedIn.value = dataLocal.linkedin;\r\n    handleUpdateLinkedIn();\r\n\r\n    gitHub.value = dataLocal.github;\r\n    infoPerson.github = dataLocal.github;\r\n    handleUpdateGitHub();\r\n  }\r\n};\r\nrecoverInfo();\r\n\r\n"]}